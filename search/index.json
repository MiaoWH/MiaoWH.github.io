[{"content":"准备工作 外面的VPS或者VM（带Public IP），后面统称VM。 临时的小飞机：用于查看官网教程，可以直接google V2Ray，官网教程还是比较详细的。可以先看教程，如果遇到问题再来看看这篇文章。 核心技术 V2Ray (VMESS + TLS + gRPC) 组装过程 零件组装 VM 开一个22端口用于SSH，再开一个随意的端口用于接入你的流量，比如2333。 SSH到你的VM，按照官网教程下载V2Ray，并配置V2Ray Service Config。 下面给出了我的配置，这个是选择了gRPC的作为客户端与服务端的通信方式，并且启用了TLS。如果你是第一次设置，其实可以先用官网给出的简单配置，也是能够工作的。只是可能很快就会被封掉，因为我们是有网络长城的，它可以偷看谁在偷偷翻越城墙，然后把ta抓起来（不是。gRPC+TLS这种方式目前应该能够比较好的躲避审查\u0026hellip;吧。配置TLS是需要一些额外操作的，这些官网也都有。gRPC不需要什么额外的配置。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 { \u0026#34;inbounds\u0026#34;: [ { \u0026#34;port\u0026#34;: 2333, // 服务器监听端口 \u0026#34;protocol\u0026#34;: \u0026#34;vmess\u0026#34;, // 主传入协议 \u0026#34;settings\u0026#34;: { \u0026#34;clients\u0026#34;: [ { \u0026#34;id\u0026#34;: \u0026#34;your id\u0026#34;, // 用户 ID，客户端与服务器必须相同 \u0026#34;alterId\u0026#34;: 0 } ] }, \u0026#34;streamSettings\u0026#34;: { \u0026#34;network\u0026#34;: \u0026#34;grpc\u0026#34;, \u0026#34;security\u0026#34;: \u0026#34;tls\u0026#34;, // security 要设置为 tls 才会启用 TLS \u0026#34;tlsSettings\u0026#34;: { \u0026#34;certificates\u0026#34;: [ { \u0026#34;certificateFile\u0026#34;: \u0026#34;your cert\u0026#34;, // 证书文件 \u0026#34;keyFile\u0026#34;: \u0026#34;your key\u0026#34; // 密钥文件 } ] }, \u0026#34;grpcSettings\u0026#34;: { } } } ], \u0026#34;outbounds\u0026#34;: [ { \u0026#34;protocol\u0026#34;: \u0026#34;freedom\u0026#34;, // 主传出协议 \u0026#34;settings\u0026#34;: {} } ] } Cert自动更新 如果你没用TLS，那么可以先跳过这一节。\n然后TLS用的证书是每隔一段时间会更新一次的，下面是个脚本可以自动更新证书，然后更新到config中指定的位置。\n如果你不知道acme.sh是什么，那么你需要先去看看官网的教程。\n首先在terminal中输入 vim ~/update-cert.sh，然后把以下内容写进去：\n1 2 3 /root/.acme.sh/acme.sh --renew -d \u0026lt;你的域名，不需要加尖括号\u0026gt; --force /root/.acme.sh/acme.sh --installcert -d \u0026lt;你的域名，不需要加尖括号\u0026gt; --ecc --fullchain-file \u0026lt;config中写的证书地址\u0026gt; --key-file \u0026lt;config中写的密钥地址\u0026gt; systemctl restart v2ray 然后给这个文件加个执行权限 chmod +x ~/update-cert.sh\n最后在terminal中输入 crontab -e，在最后一行加入以下内容，其代表的意思是每月1号的凌晨4点执行~/update-cert.sh。\n1 0 4 1 * * ~/update-cert.sh 到此service端的配置就做完了。\n客户端配置 如果你想用PC上网，那么推荐你去github上找V2rayA这个项目，非常简单易用，直接看文档就可以。\n如果你想用移动端，那么推荐你去下个Shadowrocket。（IOS的话是需要外区的账号的，可以申请一个，网上教程很多）\n起飞 接下来你就可以准备起飞了。\n以下是一些闲言碎语： 在配置飞机的过程中呢，很重要的一个问题是考虑如何反审查。因为审查方式是一个黑盒，从这篇论文可以看出，目前的测试到的审查手段是非常多样和复杂的。这其中应该有非常多的学者投入到封锁的工作中吧，将这么多的精力放在给自己同胞构建牢笼，美其名曰怕外面不好的思想影响人民。这可能就是为什么别人觉得我们不民主不自由吧，闭关锁国并不是历史\u0026hellip;\n","date":"2024-10-04T00:00:00Z","permalink":"https://miaowh.github.io/p/airplane/","title":"Build your airplane"}]